<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Andrea's Cartoon GIFs</title>
    <style type="text/css">
        button,
        div,
        form,
        input {
            margin: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Cartoon Search</h1>

        <div id="buttons-view"></div>

        <form id="cartoon-form">
            <label for="cartoon-input">Add a cartoon of your choice!</label>
            <input type="text" id="cartoon-input">
            <br>

            <input id="add-cartoon" type="submit" value="Add a cartoon of your choice!">
        </form>

        <div id="cartoon-view">
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">
            var topics = ["The Simpsons", "Bob's Burgers", "American Dad", "Archer", "Rick and Morty", "Ren and Stimpy", "Beavis and Butthead", "Cow and Chicken", "The PJ's", "Rocko's Modern Life", "The Boondocks", "Fraggle Rock", "Futurama", "Care Bears"];
            function displayCartoonInfo() {
               var cartoon = $(this).attr("username");
               var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=7T2AwhXBS4Npw8okLWSh9y0Y9aFXOpUs&q=" + cartoon + "&limit=10&offset=0&rating=G&lang=en";

                $.ajax({
                    url: queryURL,
                    method: "GET",
                }).then(function(response) {
                    var cartoonDiv = $("<div class='cartoon'>");
                    var rating = response.data.rating;
                    var pOne = $("<p>").text("Rating: " + rating);
                    cartoonDiv.append(pOne);
                    var gifURL = response.data.bitly_gif_url;
                    var gif = $("<gif>").attr("src", gifURL);
                    cartoonDiv.append(gif);
                    $("#cartoon-view").prepend(cartoonDiv);
                });
            }

            function renderButtons() {
                $("#buttons-view").empty();
                for (var i = 0; i < topics.length; i++); {
                   var a = $("<button>"); 
                   a.addClass("cartoon-btn");
                   a.attr("username", topics[i]);
                   a.text(topics[i]);
                   $("#cartoon-view").append(a);
                }
            }

            $("#add-cartoon").on("click", function(event) {
                event.preventDefault();
                var cartoons = $("#cartoon-input").val().trim();
                cartoon.push(cartoons);
                renderButtons();
            });     

            $(document).on("click", ".cartoon-btn", displayCartoonInfo);
            renderButtons();
            $("#cartoon-view").text()


         //$(".gif").on("click", function () {
         //   var state = $(this).attr("data-state");


            // If the clicked image's state is still, update its src attribute to what its data-animate value is.
            // Then, set the image's data-state to animate
            // Else set src to the data-still value
           //if (state === "still") {
            //    $(this).attr("src", $(this).attr("data-animate"));
             //   $(this).attr("data-state", "animate");
           // } else {
            //    $(this).attr("src", $(this).attr("data-still"));
             //   $(this).attr("data-state", "still");
           // }
       // });
    </script>
  </div>
</body>

</html>